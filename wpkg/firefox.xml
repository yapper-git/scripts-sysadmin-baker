<?xml version="1.0" encoding="UTF-8"?>
<packages>

    <package 
        id="firefox"
        name="Mozilla Firefox"
        revision="%version%">

        <variable name="version" value="49.0.2" />
        <variable name="architecture" value="x86" />
        <variable name="locale" value="fr" />

        <check type="uninstall" condition="exists" path="Mozilla Firefox %version% (%architecture% %locale%)" />

        <install cmd="taskkill /F /IM Firefox.exe">
            <exit code="0" />
            <exit code="-1073741515" />
            <exit code="128" />
        </install>

        <install cmd='"%SOFTWARE%\firefox\Firefox Setup %version%.exe" -ms' />
        <!-- Make Firefox the Default Browser -->
        <install architecture="x86" cmd='%ComSpec% /c "%PROGRAMFILES%\Mozilla Firefox\uninstall\helper.exe" /SetAsDefaultAppGlobal' ><exit code="2" /></install>
        <install architecture="x64" cmd='%ComSpec% /c "%PROGRAMFILES(x86)%\Mozilla Firefox\uninstall\helper.exe" /SetAsDefaultAppGlobal' ><exit code="2" /></install>

        <upgrade include="install" />

        <remove cmd="taskkill /F /IM Firefox.exe">
            <exit code="0" />
            <exit code="128" />
            <exit code="-1073741515" />
        </remove>
        <!-- for 32bit and 64bit System -->
        <remove cmd='%COMSPEC% /C if exist "%PROGRAMFILES%\Mozilla Firefox\uninstall\helper.exe" "%PROGRAMFILES%\Mozilla Firefox\uninstall\helper.exe" -ms' />
        <remove cmd='%COMSPEC% /C if exist "%PROGRAMFILES(x86)%\Mozilla Firefox\uninstall\helper.exe" "%PROGRAMFILES(x86)%\Mozilla Firefox\uninstall\helper.exe" -ms' />
    </package>

</packages>
